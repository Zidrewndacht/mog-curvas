<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curvas</title>
  <link rel="stylesheet" href="style.css">
  <script src="scripts.js" defer></script>
</head>

<body>
  <button id="minimize-toggle" class="minimize-button">‚õ≠</button>
  <div id="ui-controls-wrapper">
    <div id="ui-controls">
      <div class="ui-info">
        <h1><span style="color:#004015c0">NURBS grau 3</span> + <span style="color:darkred">B√©zier Grau 7</span></h1>
        <p>Mova os pontos de controle existentes arrastando-os com o bot√£o esquerdo do mouse.</p>
        <p>Clique <!--(ou toque)--> com o bot√£o esquerdo no espa√ßo vazio para adicionar novo ponto √† <span style="font-weight: bold;color:#004015c0">curva 1</span>. 
          <br>A <span style="font-weight: bold;color:darkred">curva 2</span> possui n√∫mero fixo de pontos de controle (8).<br>
        <p>Clique com o bot√£o direito <!--(ou segure com o dedo)--> sobre um ponto para configurar (posi√ß√£o e peso, se aplic√°vel) ou
          remover o ponto. Pontos da curva de b√©zier n√£o s√£o remov√≠veis.<br>
        <p>Clique na engrenagem no canto superior esquerdo para minimizar ou re-exibir esta p√°gina de configura√ß√£o.<br>
        <p>Ajuste as configura√ß√µes globais a seguir conforme necess√°rio:</p>
      </div>
      <div class="controls-wrapper">
        <div class="control-group" id="NURBS-settings">
          <!-- <h1>Configura√ß√µes das curvas</h1> -->
          <div id="NURBSKnotWrapper">
            <label for="NURBSknotVector">Vetor de n√≥s da NURBS:</label>
            <input type="text" id="NURBSknotVector">
            <button id="resetKnots">Restaurar</button>
            <button id="applyKnots" style="display:none;">Aplicar</button>
          </div>
          <div class="checkbox-item">
              <input type="checkbox" id="forceC0" checked disabled>
              <label for="forceC0" class="checkbox-lbl">For√ßar C0</label>
          </div>
          <div class="checkbox-item">
              <input type="checkbox" id="forceC1" title="Ativar esta op√ß√£o manipula automaticamente os pontos 1 ao interagir com pontos 0 ou 1. Tamb√©m desabilita o ajuste de pesos e/ou a exclus√£o do ponto 1 da NURBS." checked>
              <label for="forceC1" class="checkbox-lbl" >For√ßar C1</label>
          </div>
          <div class="checkbox-item">
              <input type="checkbox" id="forceC2">
              <label for="forceC2" class="checkbox-lbl">For√ßar C2</label>
          </div>
          <div id="sampleCount-container">
              <label for="sampleCount" class="setting-lbl">N√∫mero de amostras por segmento:</label>
              <input type="number" id="sampleCount" min="2" max="100" value="50" step="2">
          </div>
        </div>

        <div class="control-group" id="view-settings">
            <!-- <h1>Configura√ß√µes da visualiza√ß√£o</h1> -->
            <div class="checkbox-item">
                <input type="checkbox" id="showControlPolygon" checked>
                <label for="showControlPolygon" class="checkbox-lbl">Exibir pol√≠gono <br>de controle</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="showControlPoints" >
                <label for="showControlPoints" class="checkbox-lbl">Exibir pontos <br>de controle</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="showPointIndex" checked >
                <label for="showPointIndex" class="checkbox-lbl">Exibir <br>√≠ndices</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="showWeights">
                <label for="showWeights" class="checkbox-lbl" >Exibir <br>pesos</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="showKnots">
                <label for="showKnots" class="checkbox-lbl">Exibir <br>n√≥s</label>
            </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Usando t√©cnica similar √† de IoT-entrada-escola para animar popup. -->
  <div id="pointContextMenu" class="context-menu">
    <div class="menu-item" id="contextTitle">Editando: <strong><span id="contextCurveTitle"></span></strong></div>
    <div id="setXYZ">
      <div class="menu-item">x:
        <input type="number" id="setX" class="menu-number-input" step="1" >
      </div>
      <div class="menu-item">y:
        <input type="number" id="setY" class="menu-number-input" step="1" >
      </div>
      <div class="menu-item">z:
        <input type="number" id="setZ" class="menu-number-input" step="1" disabled >
      </div>
    </div>
    <div class="menu-item" id="setWeight"><span>Peso: </span>
      <input type="number" id="weightInput" class="menu-number-input" step="0.1" value="1.0" >
    </div>
    <div class="menu-item" id="deletePoint"><span>Remover ponto üóëÔ∏è </span></div>
  </div>

  <div id="debugPopup" class="context-menu">
    <div class="menu-item">
      Vetor tangente na B√©zier: <span>
        <span id="bezierMagnitude">0</span> ‚à† 
        <span id="bezierAngle">0</span>¬∞
      </span>
    </div>
    <div class="menu-item">
      Vetor tangente na NURBS: <span>
        <span id="NURBSmagnitude">0</span> ‚à† 
        <span id="NURBSangle">0</span>¬∞
      </span>
    </div>
    
    <div class="menu-item">
      Vetor'' B√©zier: <span>
        <span id="bezierMagnitude2">0</span> ‚à† 
        <span id="bezierAngle2">0</span>¬∞
      </span>
    </div>
    <div class="menu-item">
      Vetor'' NURBS: <span>
        <span id="NURBSmagnitude2">0</span> ‚à† 
        <span id="NURBSangle2">0</span>¬∞
      </span>
    </div>

    <div class="menu-item">
      Continuidade: 
      <strong><span id="continuityLevel">G1</span></strong>
    </div>
  </div>

  <div id="pointInfoPopup" class="context-menu">
    <div class="menu-item">Tipo: <span id="curveType"></span></div>
    <div class="menu-item">Ponto: <span id="pointIndex">0</span></div>
    <div class="menu-item">Posi√ß√£o x, y, z:
      <span class="coords">
        <span id="pointX">0</span>,
        <span id="pointY">0</span>,
        <span id="pointZ">0</span>
      </span>
    </div>
    <div class="menu-item">Peso: <span id="pointWeight">1.0</span></div>
    <!-- <div class="menu-item">Par√¢metro t: <span id="tValue">0</span></div> -->
  </div>

  <canvas id="curves-canvas"></canvas>
  <footer>
    <p><!--&copy; 2025 --> Luis Alfredo - Modelagem Geom√©trica - UDESC PPGEEL - 2025
      <!--<a class="modal-small license-link" href="#">Sobre / Licen√ßa</a>-->
    </p>
  </footer>
</body>

</html>